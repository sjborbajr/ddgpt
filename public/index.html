<!DOCTYPE html>
<html>
<head>
  <title>DDGPT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="alertMsg" role="alert" id="alertMsg"></div>
  <button class="tablink" onclick="showTab('Home',       this, 'green')"   id="HomeBtn"      >Home</button>
  <button class="tablink" onclick="showTab('Characters', this, 'blue')"    id="CharactersBtn">Characters</button>
  <button class="tablink" onclick="showTab('Adventures', this, 'orange')"  id="AdventuresBtn">Adventures</button>
  <button class="tablink" onclick="showTab('System',     this, 'red')"     id="SystemBtn"    >System</button>
  <button class="tablink" onclick="showTab('History',    this, '#008080')" id="HistoryBtn"   >History</button>
  <button class="tablink" onclick="showTab('ScotGPT',    this, '#008080')" id="ScotGPTBtn"   >ScotGPT</button>
  <div id="Home" class="tabcontent" style="display: flex;">
    <label for="player-name">Player Name:</label>
    <input type="text" id="player-name" />
    <button type="button" id="connectButton">Connect</button>
    <button type="button" id="disconnectButton" disabled>Disconnect</button>
    <div style="width: 20%;">
      <h3>Connected Users</h3>
      <div id="connected users" style="position: relative; border: 1px solid black; height: 100px;">
        <ul id="home-users-connected">
        </ul>
        <button class="refreshButton" onclick="refreshList()" ><img src="/refresh.gif" alt="Refresh" style="width:10px;height:10px;"></button>
      </div>
    </div>
    <div style="width: 75%;">
      hi
    </div>
  </div>
  <div id="Characters" class="tabcontent">
    <div>
      <label for="characters_list">Characters:</label>
      <select id="characters_list" onChange="showChar(this.value)">
      </select>
      <input type="checkbox" id="all_characters" onclick="showCharsOption()">Show All</input>
      <button id="saveChar" >Save</button>
    </div>
    <br>
    <input type="hidden" id="character_id" disabled>
    <div id="character1">
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(170px , 1fr));">
        <label for="character_owner">
          <span>Owner:</span>
          <select id="character_owner" disabled><option value="unowned">unowned</option></select>
        </label>
        <label for="character_Gender">
          <span>Gender:</span>
          <select id="character_Gender"><option value="not specified">not specified</option><option value="Male">Male</option><option value="Female">Female</option></select>
        </label>
        <label for="character_state">
          <span>State:</span>
          <select id="character_state"><option value="alive">alive</option><option value="dead">dead</option><option value="missing">missing</option></select>
        </label>
      </div>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px , 1fr)); padding-top: 10px">
        <label for="character_name">
          <span>Name:</span>
          <input type="text" id="character_name">
        </label>
        <label for="character_Race">
          <span>Race:</span>
          <input type="text" id="character_Race">
        </label>
        <label for="character_Class">
          <span>Class:</span>
          <input type="text" id="character_Class">
        </label>
        <label for="character_activeAdventure">
          <span>Adventure:</span>
          <input type="text" id="character_activeAdventure" disabled>
        </label>
      </div>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px , 1fr)); padding-top: 10px;">
        <label for="character_Lvl" class="charstat-label">
          <span>Level:</span>
          <input type="text" id="character_Lvl" class="charstat">
        </label>
        <label for="character_HP" class="charstat-label">
          <span>HP:</span>
          <input  type="text" id="character_HP"  class="charstat">
        </label>
        <label for="character_AC" class="charstat-label">
          <span>AC:</span>
          <input type="text" id="character_AC" class="charstat">
        </label>
        <label for="character_STR" class="charstat-label">
          <span>STR:</span>
          <input type="text" id="character_STR" class="charstat">
        </label>
        <label for="character_DEX" class="charstat-label">
          <span>DEX:</span>
          <input type="text" id="character_DEX" class="charstat">
        </label>
        <label for="character_CON" class="charstat-label">
          <span>CON:</span>
          <input type="text" id="character_CON" class="charstat">
        </label>
        <label for="character_INT" class="charstat-label">
          <span>INT:</span>
          <input type="text" id="character_INT" class="charstat">
        </label>
        <label for="character_INT" class="charstat-label">
          <span>WIS:</span>
          <input type="text" id="character_WIS" class="charstat">
        </label>
        <label for="character_CHA" class="charstat-label">
          <span>CHA:</span>
          <input type="text" id="character_CHA" class="charstat">
        </label>
      </div>
    </div>
    <table id="character2" >
      <tr><th>Weapon:</th><td width="94%"><textarea id="character_Weapon"></textarea></td></tr>
      <tr><th>Armor:</th><td><textarea id="character_Armor"></textarea></td></tr>
      <tr><th>Inventory:</th><td><textarea id="character_Inventory"></textarea></td></tr>
      <tr><th>Backstory:</th><td><textarea id="character_Backstory"></textarea></td></tr>
      <tr><th>Adventures:</th><td><textarea id="character_adventures" disabled></textarea></td></tr>
    </table><br>
  </div>
  <div id="System" class="tabcontent">
    <div class="item">
      <label>Dungeon</label>
      <label for="temperature">
        <span>Temperature:</span>
        <input type="number" id="temperature" min=0 max=2 step="0.05"></input>
      </label>
      <label for="maxTokens">
        <span>Max Tokens:</span>
        <input type="number" id="maxTokens" min=128 max=8296 step="128"></input>
      </label>
      <label for="model">
        <span>Model:</span>
        <select id="model">
          <option value="gpt-3.5-turbo-0301">gpt-3.5-turbo-0301</option>
          <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
          <option value="gpt-4">gpt-4</option>
          <option value="gpt-4-0314">gpt-4-0314</option>
          <option value="gpt-4-32k">gpt-4-32k</option>
          <option value="gpt-4-32k-0314">gpt-4-32k-0314</option>
        </select>
      </label>
    </div><br><br>
    <div class="item">
      <label>Croupier</label>
      <label for="cru_temperature">
        Temperature:
        <input type="number" id="cru_temperature" min=0 max=2 step="0.05"></input>
      </label>
      <label for="cru_maxTokens">
        Max Tokens:
        <input type="number" id="cru_maxTokens" min=128 max=8296 step="128"></input>
      </label>
      <label for="cru_model">
        Model:
        <select id="cru_model">
          <option value="gpt-3.5-turbo-0301">gpt-3.5-turbo-0301</option>
          <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
          <option value="gpt-4">gpt-4</option>
          <option value="gpt-4-0314">gpt-4-0314</option>
          <option value="gpt-4-32k">gpt-4-32k</option>
          <option value="gpt-4-32k-0314">gpt-4-32k-0314</option>
        </select>
      </label>
    </div><br><br>
    <button id="save" >Save</button>
    <h3>GPT Messages</h3>
    <div id="gpt-messages">
      <div id="gpt-messages-left-column">
        <ul id="gpt-messages-list">
        </ul>
      </div>
      <div id="gpt-messages-resize-bar"></div>
      <div id="gpt-messages-right-column">
        <div class="item">
          <label for="croupier_role">role:</label>
          <select  id="croupier_role">
            <option value="system">system</option>
            <option value="user">user</option>
            <option value="assistant">assistant</option>
          </select>
          Order:<input type="number" id="croupier_order" min=0 max=9999>
          Message Name:<input type="text" id="croupier_name">
          <button id="rename" >Rename</button>
          <input type="hidden" id="croupier_name_hidden" disabled>
        </div>
        <div class="item">
          <label for="croupier_content">content:</label>
          <textarea id="croupier_content"></textarea>
        </div>
        <div class="item">
          <label for="croupier_notes">notes:</label>
          <textarea id="croupier_notes"></textarea>
        </div>
        <div class="item">
          <label for="croupier_json">json:</label>
          <textarea id="croupier_json"></textarea>
        </div>
      </div>
    </div>
  </div>
  <div id="ScotGPT" class="tabcontent">
    <div class="item">
      <label for="temperatureScot">Temperature:</label>
      <input id="temperatureScot"></input>
      <label for="keyScot">API Key:</label>
      <input id="keyScot"></input>
      <label for="maxTokensScot">Max Tokens:</label>
      <input id="maxTokensScot"></input>
  
      <label for="modelScot">Model:</label>
      <select id="modelScot">
        <option value="gpt-3.5-turbo-0301">gpt-3.5-turbo-0301</option>
        <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
        <option value="gpt-4">gpt-4</option>
        <option value="gpt-4-0314">gpt-4-0314</option>
        <option value="gpt-4-32k">gpt-4-32k</option>
        <option value="gpt-4-32k-0314">gpt-4-32k-0314</option>
        <option value="gpt-4-32k-0314">gpt-4-32k-0613</option>
      </select>
    </div> 
    <div class="item">
      <label for="system-messageScot">system-message:</label>
      <textarea id="system-messageScot" oninput="autoResize(this)"></textarea>
    </div> 
    <div class="item">
      <label for="assistant-messageScot">assistant-message:</label>
      <textarea id="assistant-messageScot" oninput="autoResize(this)" cols="80"></textarea>
    </div> 
    <div class="item">
      <label for="user-messageScot">user-message:</label>
      <textarea id="user-messageScot" oninput="autoResize(this)" cols="80"></textarea>
    </div> 
    <button id="scotRun" >Run</button>
    <div class="item">
      <label for="response-messageScot">response:</label>
      <textarea id="response-messageScot" oninput="autoResize(this)" cols="80"></textarea>
    </div>
  </div>
  <div id="History" class="tabcontent">
    <div id="gpt-history">
      <div id="gpt-history-left-column">
        <ul id="gpt-history-list">
        </ul>
        <button class="refreshButton" onclick="refreshList()" ><img src="/refresh.gif" alt="Refresh" style="width:10px;height:10px;"></button>
      </div>
      <div id="gpt-history-resize-bar"></div>
      <div id="gpt-history-right-column">
        <label for="history_limit">
          <span>Display:</span>
          <select id="history_limit" onChange="listHistory(this.value)">
            <option value="all">ALL</option>
          </select>
        </label>
        <label for="history_temperature">
          <span>Temperature:</span>
          <input type="number" id="history_temperature"  min=1 max="100" disabled></input>
        </label>
        <label for="history_maxTokens">
          <span>Max Tokens:</span>
          <input type="number" id="history_maxTokens"  min=1 max="100" disabled></input>
        </label>
        <label for="history_model">
          <span>Model:</span>
          <input type="text" id="history_model" disabled></input>
        </label>
        <label for="history_completion_tokens">
          <span>completion_tokens:</span>
          <input type="text" id="history_completion_tokens" disabled></input>
        </label>
        <label for="history_duration">
          <span>duration:</span>
          <input type="text" id="history_duration" disabled></input>
        </label>
        <label for="history_finish_reason">
          <span>finish_reason:</span>
          <input type="text" id="history_finish_reason" disabled></input>
        </label>
        <label for="history_prompt_tokens">
          <span>prompt_tokens:</span>
          <input type="text" id="history_prompt_tokens" disabled></input>
        </label>
        <label for="history_status">
          <span>status:</span>
          <input type="text" id="history_status" disabled></input>
        </label>
        <label for="history_url">
          <span>status:</span>
          <input type="text" id="history_url" disabled></input>
        </label>
        <table id="history_table">
        </table>
      </div>
    </div>
  </div>
  <div id="Adventures" class="tabcontent">
    <div>
      <label for="adventure_list">Adventures:</label>
      <select id="adventure_list" onChange="showAdventure(this.value)"></select>
      <input type="checkbox" id="active_only" onclick="listAdventureOption()" checked>Show Active</input>
    </div>
    <div id="adventure-history-container">
      <h2>Adventure History</h2>
      <div id="adventure-history" style="height: 500px; overflow-y: scroll; border: 1px solid #ddd;"></div>
    </div>
    <div id="player-input-container">
      <h2 id="player-input-header">Player Input</h2>
      <textarea id="player-input-field" placeholder="Enter your action"></textarea>
      <button id="player-input-submit">Suggest</button>
      <button id="player-input-edit" hidden="true">Edit</button>
    </div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/client.js"></script>
  <script>
    var resizeBar = document.getElementById('gpt-messages-resize-bar');
    var leftColumn = document.getElementById('gpt-messages-left-column');
    var rightColumn = document.getElementById('gpt-messages-right-column');
    var container = document.getElementById('gpt-messages');
    var startX;
    var initialLeftWidth;

    resizeBar.addEventListener('mousedown', initDrag);

    function initDrag(e) {
      startX = e.clientX;
      initialLeftWidth = leftColumn.offsetWidth;

      document.addEventListener('mousemove', doDrag);
      document.addEventListener('mouseup', stopDrag);
    }

    function doDrag(e) {
      var deltaX = e.clientX - startX;
      var newLeftWidth = initialLeftWidth + deltaX;
      var containerWidth = container.offsetWidth;
      var leftWidthPercentage = (newLeftWidth / containerWidth) * 100;
      var rightWidthPercentage = 100 - leftWidthPercentage;

      leftColumn.style.width = leftWidthPercentage + '%';
      rightColumn.style.width = rightWidthPercentage + '%';
    }

    function stopDrag() {
      document.removeEventListener('mousemove', doDrag);
      document.removeEventListener('mouseup', stopDrag);
    }
  </script>
</body>
</html>